!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a.fakey=b()}(this,function(){var a,b,c;return c=function(){var a=function(a){return'"'===a?a="doublequote":"\\"===a?a="forwardslash":" "===a&&(a="space"),a},b=function(b){return d.press[a(b)]},c=function(b){return d.down[a(b)]},d={};return d.press={enter:{which:13,keyCode:13,shiftKey:!1},shift:{which:16,keyCode:16,shiftKey:!0},space:{which:32,keyCode:32,shiftKey:!0},"!":{which:33,keyCode:33,shiftKey:!0},doublequote:{which:34,keyCode:34,shiftKey:!0},"#":{which:35,keyCode:35,shiftKey:!0},$:{which:36,keyCode:36,shiftKey:!0},"%":{which:37,keyCode:37,shiftKey:!0},"&":{which:38,keyCode:38,shiftKey:!0},"'":{which:39,keyCode:39,shiftKey:!1},"(":{which:40,keyCode:40,shiftKey:!0},")":{which:41,keyCode:41,shiftKey:!0},"*":{which:42,keyCode:42,shiftKey:!0},"+":{which:43,keyCode:43,shiftKey:!0},",":{which:44,keyCode:44,shiftKey:!1},"-":{which:45,keyCode:45,shiftKey:!1},".":{which:46,keyCode:46,shiftKey:!1},"/":{which:47,keyCode:47,shiftKey:!1},0:{which:48,keyCode:48,shiftKey:!1},1:{which:49,keyCode:49,shiftKey:!1},2:{which:50,keyCode:50,shiftKey:!1},3:{which:51,keyCode:51,shiftKey:!1},4:{which:52,keyCode:52,shiftKey:!1},5:{which:53,keyCode:53,shiftKey:!1},6:{which:54,keyCode:54,shiftKey:!1},7:{which:55,keyCode:55,shiftKey:!1},8:{which:56,keyCode:56,shiftKey:!1},9:{which:57,keyCode:57,shiftKey:!1},":":{which:58,keyCode:58,shiftKey:!0},";":{which:59,keyCode:59,shiftKey:!1},"<":{which:60,keyCode:60,shiftKey:!0},"=":{which:61,keyCode:61,shiftKey:!1},">":{which:62,keyCode:62,shiftKey:!0},"?":{which:63,keyCode:63,shiftKey:!0},"@":{which:64,keyCode:64,shiftKey:!0},A:{which:65,keyCode:65,shiftKey:!0},B:{which:66,keyCode:66,shiftKey:!0},C:{which:67,keyCode:67,shiftKey:!0},D:{which:68,keyCode:68,shiftKey:!0},E:{which:69,keyCode:69,shiftKey:!0},F:{which:70,keyCode:70,shiftKey:!0},G:{which:71,keyCode:71,shiftKey:!0},H:{which:72,keyCode:72,shiftKey:!0},I:{which:73,keyCode:73,shiftKey:!0},J:{which:74,keyCode:74,shiftKey:!0},K:{which:75,keyCode:75,shiftKey:!0},L:{which:76,keyCode:76,shiftKey:!0},M:{which:77,keyCode:77,shiftKey:!0},N:{which:78,keyCode:78,shiftKey:!0},O:{which:79,keyCode:79,shiftKey:!0},P:{which:80,keyCode:80,shiftKey:!0},Q:{which:81,keyCode:81,shiftKey:!0},R:{which:82,keyCode:82,shiftKey:!0},S:{which:83,keyCode:83,shiftKey:!0},T:{which:84,keyCode:84,shiftKey:!0},U:{which:85,keyCode:85,shiftKey:!0},V:{which:86,keyCode:86,shiftKey:!0},W:{which:87,keyCode:87,shiftKey:!0},X:{which:88,keyCode:88,shiftKey:!0},Y:{which:89,keyCode:89,shiftKey:!0},Z:{which:90,keyCode:90,shiftKey:!0},"[":{which:91,keyCode:91,shiftKey:!1},forwardslash:{which:92,keyCode:92,shiftKey:!1},"]":{which:93,keyCode:93,shiftKey:!1},"^":{which:94,keyCode:94,shiftKey:!0},_:{which:95,keyCode:95,shiftKey:!0},"`":{which:96,keyCode:96,shiftKey:!1},a:{which:97,keyCode:97,shiftKey:!1},b:{which:98,keyCode:98,shiftKey:!1},c:{which:99,keyCode:99,shiftKey:!1},d:{which:100,keyCode:100,shiftKey:!1},e:{which:101,keyCode:101,shiftKey:!1},f:{which:102,keyCode:102,shiftKey:!1},g:{which:103,keyCode:103,shiftKey:!1},h:{which:104,keyCode:104,shiftKey:!1},i:{which:105,keyCode:105,shiftKey:!1},j:{which:106,keyCode:106,shiftKey:!1},k:{which:107,keyCode:107,shiftKey:!1},l:{which:108,keyCode:108,shiftKey:!1},m:{which:109,keyCode:109,shiftKey:!1},n:{which:110,keyCode:110,shiftKey:!1},o:{which:111,keyCode:111,shiftKey:!1},p:{which:112,keyCode:112,shiftKey:!1},q:{which:113,keyCode:113,shiftKey:!1},r:{which:114,keyCode:114,shiftKey:!1},s:{which:115,keyCode:115,shiftKey:!1},t:{which:116,keyCode:116,shiftKey:!1},u:{which:117,keyCode:117,shiftKey:!1},v:{which:118,keyCode:118,shiftKey:!1},w:{which:119,keyCode:119,shiftKey:!1},x:{which:120,keyCode:120,shiftKey:!1},y:{which:121,keyCode:121,shiftKey:!1},z:{which:122,keyCode:122,shiftKey:!1},"{":{which:123,keyCode:123,shiftKey:!0},"|":{which:124,keyCode:124,shiftKey:!0},"}":{which:125,keyCode:125,shiftKey:!0},"~":{which:126,keyCode:126,shiftKey:!0},end:{which:0,keyCode:35,shiftKey:!1},home:{which:0,keyCode:36,shiftKey:!1},leftarrow:{which:0,keyCode:37,shiftKey:!1},uparrow:{which:0,keyCode:38,shiftKey:!1},rightarrow:{which:0,keyCode:39,shiftKey:!1},downarrow:{which:0,keyCode:40,shiftKey:!1},"delete":{which:0,keyCode:46,shiftKey:!1}},d.down={backspace:{which:8,keyCode:8,shiftKey:!1},tab:{which:9,keyCode:9,shiftKey:!1},enter:{which:13,keyCode:13,shiftKey:!1},shift:{which:16,keyCode:16,shiftKey:!1},ctrl:{which:17,keyCode:17,shiftKey:!1},alt:{which:18,keyCode:18,shiftKey:!1},capslock:{which:20,keyCode:20,shiftKey:!1},escape:{which:27,keyCode:27,shiftKey:!1},space:{which:32,keyCode:32,shiftKey:!0},end:{which:35,keyCode:35,shiftKey:!1},home:{which:36,keyCode:36,shiftKey:!1},leftarrow:{which:37,keyCode:37,shiftKey:!1},uparrow:{which:38,keyCode:38,shiftKey:!1},rightarrow:{which:39,keyCode:39,shiftKey:!1},downarrow:{which:40,keyCode:40,shiftKey:!1},"delete":{which:46,keyCode:46,shiftKey:!1},0:{which:48,keyCode:48,shiftKey:!1},1:{which:49,keyCode:49,shiftKey:!1},2:{which:50,keyCode:50,shiftKey:!1},3:{which:51,keyCode:51,shiftKey:!1},4:{which:52,keyCode:52,shiftKey:!1},5:{which:53,keyCode:53,shiftKey:!1},6:{which:54,keyCode:54,shiftKey:!1},7:{which:55,keyCode:55,shiftKey:!1},8:{which:56,keyCode:56,shiftKey:!1},9:{which:57,keyCode:57,shiftKey:!1},a:{which:65,keyCode:65,shiftKey:!1},b:{which:66,keyCode:66,shiftKey:!1},c:{which:67,keyCode:67,shiftKey:!1},d:{which:68,keyCode:68,shiftKey:!1},e:{which:69,keyCode:69,shiftKey:!1},f:{which:70,keyCode:70,shiftKey:!1},g:{which:71,keyCode:71,shiftKey:!1},h:{which:72,keyCode:72,shiftKey:!1},i:{which:73,keyCode:73,shiftKey:!1},j:{which:74,keyCode:74,shiftKey:!1},k:{which:75,keyCode:75,shiftKey:!1},l:{which:76,keyCode:76,shiftKey:!1},m:{which:77,keyCode:77,shiftKey:!1},n:{which:78,keyCode:78,shiftKey:!1},o:{which:79,keyCode:79,shiftKey:!1},p:{which:80,keyCode:80,shiftKey:!1},q:{which:81,keyCode:81,shiftKey:!1},r:{which:82,keyCode:82,shiftKey:!1},s:{which:83,keyCode:83,shiftKey:!1},t:{which:84,keyCode:84,shiftKey:!1},u:{which:85,keyCode:85,shiftKey:!1},v:{which:86,keyCode:86,shiftKey:!1},w:{which:87,keyCode:87,shiftKey:!1},x:{which:88,keyCode:88,shiftKey:!1},y:{which:89,keyCode:89,shiftKey:!1},z:{which:90,keyCode:90,shiftKey:!1},A:{which:65,keyCode:65,shiftKey:!0},B:{which:66,keyCode:66,shiftKey:!0},C:{which:67,keyCode:67,shiftKey:!0},D:{which:68,keyCode:68,shiftKey:!0},E:{which:69,keyCode:69,shiftKey:!0},F:{which:70,keyCode:70,shiftKey:!0},G:{which:71,keyCode:71,shiftKey:!0},H:{which:72,keyCode:72,shiftKey:!0},I:{which:73,keyCode:73,shiftKey:!0},J:{which:74,keyCode:74,shiftKey:!0},K:{which:75,keyCode:75,shiftKey:!0},L:{which:76,keyCode:76,shiftKey:!0},M:{which:77,keyCode:77,shiftKey:!0},N:{which:78,keyCode:78,shiftKey:!0},O:{which:79,keyCode:79,shiftKey:!0},P:{which:80,keyCode:80,shiftKey:!0},Q:{which:81,keyCode:81,shiftKey:!0},R:{which:82,keyCode:82,shiftKey:!0},S:{which:83,keyCode:83,shiftKey:!0},T:{which:84,keyCode:84,shiftKey:!0},U:{which:85,keyCode:85,shiftKey:!0},V:{which:86,keyCode:86,shiftKey:!0},W:{which:87,keyCode:87,shiftKey:!0},X:{which:88,keyCode:88,shiftKey:!0},Y:{which:89,keyCode:89,shiftKey:!0},Z:{which:90,keyCode:90,shiftKey:!0},"`":{which:192,keyCode:192,shiftKey:!1},"~":{which:192,keyCode:192,shiftKey:!0},"-":{which:189,keyCode:189,shiftKey:!1},_:{which:189,keyCode:189,shiftKey:!0},"=":{which:187,keyCode:187,shiftKey:!1},"+":{which:187,keyCode:187,shiftKey:!0},"[":{which:219,keyCode:219,shiftKey:!1},"{":{which:219,keyCode:219,shiftKey:!0},"]":{which:221,keyCode:221,shiftKey:!1},"}":{which:221,keyCode:221,shiftKey:!0},forwardslash:{which:220,keyCode:220,shiftKey:!1},"|":{which:220,keyCode:220,shiftKey:!0},";":{which:186,keyCode:186,shiftKey:!1},":":{which:186,keyCode:186,shiftKey:!0},"'":{which:222,keyCode:222,shiftKey:!1},doublequote:{which:222,keyCode:222,shiftKey:!0},",":{which:188,keyCode:188,shiftKey:!1},"<":{which:188,keyCode:188,shiftKey:!0},".":{which:190,keyCode:190,shiftKey:!1},">":{which:190,keyCode:190,shiftKey:!0},"/":{which:191,keyCode:191,shiftKey:!1},"?":{which:191,keyCode:191,shiftKey:!0}},{press:b,down:c}}(),a=function(){var a=function(a,b,c){return a.substr(0,c)+b+a.substr(c,a.length)},b=function(a,b,c){return a.substr(0,b)+a.substr(c,a.length)},c=function(a){if("number"==typeof a.selectionStart)return{begin:a.selectionStart,end:a.selectionEnd};var b=document.selection.createRange();if(b&&b.parentElement()===a){var c=a.createTextRange(),d=a.createTextRange(),e=a.value.length;return c.moveToBookmark(b.getBookmark()),d.collapse(!1),c.compareEndPoints("StartToEnd",d)>-1?{begin:e,end:e}:{begin:-c.moveStart("character",-e),end:-c.moveEnd("character",-e)}}return{begin:0,end:0}},d=function(a,b){if(a.setSelectionRange){a.focus();try{a.setSelectionRange(b,b)}catch(c){console.error("fakey failed to set the caret",a,b,c)}}else if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveEnd("character",b),d.moveStart("character",b),d.select()}};return{addChars:a,remChars:b,getSel:c,setSel:d}}(),b=function(a,b){var c=function(a){return document.createEvent?document.createEvent(a):document.createEventObject()},d=function(a,b,c,d){i(l,a,b,c,d)},e=function(a,b,c,d){i(k,a,b,c,d)},f=function(a,b,c){var f=b.length;g(0,function(g){var i=arguments.callee,k=b[g],l=k.key?d:e,m=k.key||k.str;j(l,a,m,k.count,function(){return h(g,f,i,c)})})},g=function(a,b){setTimeout(function(){b(a)},1)},h=function(a,b,c,d){return a++,a===b?d?d():!0:g(a,c)},i=function(a,b,c,d,e){d&&"function"!=typeof d?g(0,function(f){var g=arguments.callee;a(b,c,function(){h(f,d,g,e)})}):a(b,c,d)},j=function(a,b,c,d,e){return d?a(b,c,d,e):a(b,c,e)},k=function(a,b,c){var e=b.length;g(0,function(f){d(a,b.charAt(f)),h(f,e,arguments.callee,c)})},l=function(b,c,d){var e=a.press(c),f=a.down(c),g=function(a,b,c){return a.dispatchEvent?a.dispatchEvent(c):"input"!==b?a.fireEvent("on"+b,c):!1},h=function(a,c){return g(b,c,m(b,c,a))},i=function(){return g(b,"input",n(b,"input"))};return f&&h(f,"keydown")?("backspace"===c&&p(b),e&&h(e,"keypress")&&(o(b,c),i())):f||e&&h(e,"keypress")&&(o(b,c),i()),h(f,"keyup"),d?d():!0},m=function(a,b,d){var e={altGraphKey:!1,altKey:!1,ctrlKey:!1,detail:0,keyIdentifier:"false",keyLocation:0,layerX:0,layerY:0,location:0,metaKey:!1,pageX:0,pageY:0,shiftKey:!1,view:window},f=c("Event");f.initEvent&&f.initEvent(b,!0,!0);var g;for(g in e)f[g]=e[g];for(g in d)f[g]=d[g];return f},n=function(a,b){var d=c("Event");return d.initEvent&&d.initEvent(b,!0,!0),d},o=function(a,c){var d=b.getSel(a).begin;a.value=b.addChars(a.value,c,d),b.setSel(a,d+1)},p=function(a){var c=b.getSel(a).begin;a.value=b.remChars(a.value,c-1,c),b.setSel(a,c-1)};return{key:d,str:e,seq:f}}(c,a)});